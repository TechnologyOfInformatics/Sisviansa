upstream docker-frontend {
    server sisviansa_vue:8080;
}

server {
    listen 80;
    server_name localhost;
    ## NginX realmente no es útil en mi build, ya que de cargar php se encarga fpm, el cual viene ya incluído en el servicio de php, por lo tanto la usamos para filtrar y proteger a vue


    location / {
        gzip off;
        index index.html;
        root /usr/share/nginx/html/;
        error_log  /var/log/nginx/error.log;
        access_log /var/log/nginx/access.log main;

        add_header strict-transport-security "max-age=31536000; includesubdomains; preload";
        add_header x-frame-options deny;
        add_header x-content-type-options nosniff;
        add_header x-xss-protection "1; mode=block";
        add_header referrer-policy "origin";

        proxy_pass http://docker-frontend;
        proxy_redirect off;
        proxy_http_version 1.1;
        proxy_set_header upgrade $http_upgrade;
        proxy_set_header connection "upgrade";
        proxy_set_header host $host;
        proxy_set_header x-real-ip $remote_addr;
        proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for;
        proxy_set_header x-forwarded-host $server_name;
        proxy_cache_bypass $http_upgrade;

    }
}